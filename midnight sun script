

getgenv().killaura = false
getgenv().godmode = false
getgenv().autobreathing = false
getgenv().autofarm = false
getgenv().bossautofarm = false
getgenv().minionautofarm = false
getgenv().walkspeed = false
getgenv().jumpower = false
getgenv().chatspammer = false
getgenv().autogrip = false
getgenv().bossspawner = true
getgenv().noclip = true
getgenv().boss1 = false
getgenv().findnpc = true
getgenv().autoequip = true
getgenv().instantmaxlvlslayer = true
getgenv().getquest = true
getgenv().eventnpcfarm = true






local function OldManYochiro1()
    spawn(function()
if getgenv().eventnpcfarm == true then

    for i, v in pairs(game:GetService("Workspace"):GetChildren()) do
        if v.Name == eventlookingfor then
            return v.Name
        end
    end

else
    return
end
end)
end



local function eventnpcfarm()
    spawn(function()
        if getgenv().eventnpcfarm == true then
            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(304, 100, 2321)
            wait(3)

            while getgenv().eventnpcfarm and wait() do

for i, v in pairs(game:GetService("Workspace"):GetChildren()) do
    
    if string.find(v.Name, eventlookingfor) and v.Name ~= OldManYochiro1() and not v:FindFirstChild("Shadow A. Mask") then
        

        game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = v.HumanoidRootPart.CFrame * CFrame.new(0, 0, positionevent)
end
end
end
else
    return

end

    end)

end





local function killauraforevent()
    spawn(
        function()
            if getgenv().eventnpcfarm == true then
                while getgenv().eventnpcfarm do
                    task.wait()
                    pcall(function()
                        game:GetService("Players").LocalPlayer.Character:FindFirstChildOfClass("Tool").RemoteEvent:FireServer("M2")
                        task.wait()
                        game:GetService("Players").LocalPlayer.Character:FindFirstChildOfClass("Tool").RemoteEvent:FireServer("Hitbox",1,"M2")
                    end)
                end
            else
                return
            end
        end
    )
end






 local function getquest()
    spawn(function()
if getgenv().getquest == true then
    
    game:GetService("ReplicatedStorage").Events.CrowEvent:FireServer("SpawnCrow")

    game:GetService("Players").LocalPlayer.PlayerGui.Main.CrowQuest.LocalScript.RemoteEvent:FireServer("Accept")
    end
    end)
 end

local function instantlvl()
spawn(function()
if getgenv().instantmaxlvlslayer == true then
    for i = 1,10 do 
        task.spawn(function()
          while getgenv().instantmaxlvlslayer do task.wait()
            game:GetService("ReplicatedStorage").Events.LuteEvent:FireServer("Win")
          end
        end)
      end
    else
        return
end
end)
end


local function autoequip()
spawn(function()
    if getgenv().autoequip == true then
    while getgenv().autoequip do task.wait()
        for i,v in pairs(game.Players.LocalPlayer.Backpack:GetChildren()) do
            if v.name == tool then
                v.Parent = game.Players.LocalPlayer.Character
            end
        end
    end
else
    return
end
end)
end




local function OldManYochiro()
    spawn(function()
if getgenv().findnpc == true then

    for i, v in pairs(game:GetService("Workspace"):GetChildren()) do
        if v.Name == npclookingfor then
            return v.Name
        end
    end
else
    return
end
end)
end

local function findnpc()
    spawn(function()
        if getgenv().findnpc == true then
            while getgenv().findnpc and wait() do
for i, v in pairs(game:GetService("Workspace"):GetChildren()) do
    if string.find(v.Name, npclookingfor) and v.Name ~= OldManYochiro() and not v:FindFirstChild("Shadow A. Mask") then
        game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = v.HumanoidRootPart.CFrame
    end
end
end
else
    return
end
end)
end




local function windtrainer()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(-28, 328, -1690)
end

local function noclip()
    game:GetService("RunService").Stepped:Connect(
        function()
            if getgenv().noclip then
                pcall(
                    function()
                        for i, v in pairs(game.Players.LocalPlayer.Character:GetChildren()) do
                            if v.ClassName == "Part" or v.ClassName == "MeshPart" then
                                v.CanCollide = false
                            end
                        end
                    end
                )
            else
                pcall(
                    function()
                        for i, v in pairs(game.Players.LocalPlayer.Character:GetChildren()) do
                            if v.ClassName == "Part" or v.ClassName == "MeshPart" then
                                v.CanCollide = true
                            end
                        end
                    end
                )
            end
        end
    )
end

local triggered = false

local function autogrip()
    spawn(
        function()
            if getgenv().autogrip == true then
                while getgenv().autogrip do
                    task.wait(10)
                    game:GetService("Players").LocalPlayer.Character.Controller.RemoteEvent:FireServer("Grip")
                end
            else
                return
            end
        end
    )
end

local function chatspammer()
    spawn(
        function()
            if getgenv().chatspammer == true then
                while getgenv().chatspammer do
                    task.wait()
                    game:GetService("ReplicatedStorage").DefaultChatSystemChatEvents.SayMessageRequest:FireServer(sentence,"All")
                end
            else
                return
            end
        end
    )
end

local function jumpower()
    spawn(
        function()
            if getgenv().jumpower == true then
                while getgenv().jumpower do
                    task.wait()
                    game.Players.LocalPlayer.Character.Humanoid.JumpPower = amount1
                end
            else
                return
            end
        end
    )
end

local function walkspeed()
    spawn(
        function()
            if getgenv().walkspeed == true then
                while getgenv().walkspeed do
                    task.wait()
                    game.Players.LocalPlayer.Character.Humanoid.WalkSpeed = amount
                end
            else
                return
            end
        end
    )
end

local function serverhop()
    game:GetService("TeleportService"):Teleport(8874112980)
end

local function muzan()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(922, 212, 2734)
end

local function moontrainer()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(235, 399, -3794)
end

local function stwtrainer()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(-61, 81, 42)
end
local function idol1()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(954, 134, 1740)
end
local function idol2()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(71, 377, -3916)
end
local function idol3()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(1634, 149, -880)
end

local function instalute()
    game:GetService("ReplicatedStorage").Events.LuteEvent:FireServer("Win")
end

local function lutetp()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(48, 75, 113)
end

local function keypress()
    spawn(
        function()
            local N = game:GetService("VirtualInputManager")
            N:SendKeyEvent(true, "E", false, game)
        end
    )
end
local function akazaspawner()
    spawn(
        function()
            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(1045, 20, 3176)
            wait(2)
            keypress()
        end
    )
end
local function shuraspawner()
    spawn(
        function()
            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(1688, 162, -1863)
            wait(2)
            keypress()
        end
    )
end

local function bossspawner()
    spawn(
        function()
            if bosses == "Akaza" then
                akazaspawner()
            elseif bosses == "Shura" then
                shuraspawner()
            else
                return
            end
        end
    )
end
local function killauraforboss()
    spawn(
        function()
            if getgenv().bossautofarm == true then
                while getgenv().bossautofarm do
                    task.wait()
                    pcall(function()
                        game:GetService("Players").LocalPlayer.Character:FindFirstChildOfClass("Tool").RemoteEvent:FireServer("M2")
                        task.wait()
                        game:GetService("Players").LocalPlayer.Character:FindFirstChildOfClass("Tool").RemoteEvent:FireServer("Hitbox",1,"M2")
                    end)
                end
            else
                return
            end
        end
    )
end

local function boss()
    spawn(
        function()
            if getgenv().bossautofarm == true then
                if bosses == "Akaza" then
                    while getgenv().bossautofarm do
                        task.wait()

                        if game:GetService("Workspace").Live.Bosses:FindFirstChild(bosses) and not game:GetService("Workspace").Live.BossMinions:FindFirstChild("BossUltra") then
                            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = game:GetService("Workspace").Live.Bosses[bosses].HumanoidRootPart.CFrame * CFrame.new(0, 0, position1)
                        elseif not game:GetService("Workspace").Live.Bosses:FindFirstChild(bosses) then
                            bossspawner()
                            wait(5)
                        elseif game:GetService("Workspace").Live.BossMinions:FindFirstChild("BossUltra") then
                            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = game:GetService("Workspace").Live.BossMinions.BossUltra.HumanoidRootPart.CFrame * CFrame.new(0, 0, position1)
                        end
                    end
                elseif bosses == "Shura" then
                    while getgenv().bossautofarm do
                        task.wait()
                        if game:GetService("Workspace").Live.Bosses:FindFirstChild(bosses) then
                            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame =
                                game:GetService("Workspace").Live.Bosses[bosses].HumanoidRootPart.CFrame *
                                CFrame.new(0, 0, position1)
                        elseif not game:GetService("Workspace").Live.Bosses:FindFirstChild(bosses) then
                            bossspawner()
                            wait(5)
                        end
                    end
                else
                    return
                end
            else
                return
            end
        end
    )
end

local function flametrainer()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(-50, 120, 1087)
end

local function watertrainer()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(-1430, 180, 1424)
end

local function misttrainer()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(230, 180, -1973)
end
local function thundertrainer()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(-1158, 106, 618)
end

local function soundtrainer()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(-1447, 181, 1298)
end

local function killauraforautofarm()
    spawn(
        function()
            if getgenv().autofarm == true then
                while getgenv().autofarm do
                    task.wait()
                    pcall(function()
                        game:GetService("Players").LocalPlayer.Character:FindFirstChildOfClass("Tool").RemoteEvent:FireServer("M1")
                        task.wait()
                        game:GetService("Players").LocalPlayer.Character:FindFirstChildOfClass("Tool").RemoteEvent:FireServer("Hitbox",1,"M1")
                    end)
                end
            else
                return
            end
        end
    )
end

local function autofarm(demon)
    spawn(
        function()
            if getgenv().autofarm == true then
                while getgenv().autofarm do
                    task.wait()
                    if game:GetService("Workspace").Live.Npcs:FindFirstChild(demon) then
                        game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = game:GetService("Workspace").Live.Npcs[demon].HumanoidRootPart.CFrame * CFrame.new(0, 0, positionz)
                    end
                end
            else
                return
            end
        end
    )
end

local function killaura()
    spawn(
        function()
            if getgenv().killaura == true then
                while getgenv().killaura do
                    task.wait()
                    pcall(function()
                        game:GetService("Players").LocalPlayer.Character:FindFirstChildOfClass("Tool").RemoteEvent:FireServer("M1")
                        task.wait()
                        game:GetService("Players").LocalPlayer.Character:FindFirstChildOfClass("Tool").RemoteEvent:FireServer("Hitbox",1,"M1")
                    end)
                end
            else
                return
            end
        end
    )
end

local function godmode()
    spawn(
        function()
            if getgenv().godmode == true then
                while getgenv().godmode do
                    task.wait()
                    game.Players.LocalPlayer.Character.Dash.RemoteEvent:FireServer("Falldmg", 0 / 0)
                end
            else
                return
            end
        end
    )
end

local function autobreathing()
    spawn(function()
        if getgenv().autobreathing == true then
            game:GetService("Players").LocalPlayer.Character.Breath.RemoteEvent:FireServer("Start")
        else
            return
        end
    end)
end
--ui--

local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/xHeptc/Kavo-UI-Library/main/source.lua"))()

local Window = Library.CreateLib("Midnight sun v2.20 by Mac#0014 and HTDBarsi <3", "DarkTheme")

local Tab = Window:NewTab("Autofarm")

local Section = Tab:NewSection("Autofarms(use noclip to avoid glitches)")

Section:NewToggle(
    "Autofarm",
    "Toggles Autofarm",
    function(state)
        if state then
            getgenv().autofarm = true
        else
            getgenv().autofarm = false
        end
        
        killauraforautofarm()
        autofarm(demon)
    end
)

Section:NewDropdown(
    "Choose Mob",
    "Chooses mob for the autofarm to farm",
    {"Weak", "Strong", "Ultra", "Mizunoto", "Kanato", "Tsuchinoe", "Hinoe"},
    function(currentOption)
        demon = currentOption
    end
)
Section:NewToggle(
    "Auto grip(for slayer npcs)",
    "Automaticaly grips slayer npcs",
    function(state)
        if state then
            getgenv().autogrip = true
        else
            getgenv().autogrip = false
        end
        autogrip()
    end
)

Section:NewSlider(
    "Farm position",
    "Farm position",
    7,
    -6,
    function(s) -- 500 (MaxValue) | 0 (MinValue)
        positionz = s
    end
)

local Section = Tab:NewSection("Autofarm Bosses(use  godmode)")

Section:NewDropdown(
    "Choose boss to farm(must be spawned)",
    "Boss to choose",
    {"Akaza", "Shura"},
    function(currentOption)
        bosses = currentOption
    end
)

Section:NewButton(
    "Boss spawner",
    "Spawns the boss for you",
    function()
        if bosses == "Akaza" then
            akazaspawner()
        elseif bosses == "Shura" then
            shuraspawner()
        else
            return
        end
    end
)

Section:NewToggle(
    "Autofarm Bosses(use god mode, best position is 3)",
    "Toggles Bosses Autofarm",
    function(state)
        if state then
            getgenv().bossautofarm = true
        else
            getgenv().bossautofarm = false
        end
        killauraforboss()
        boss()
    end
)

Section:NewSlider(
    "Farm position ",
    "Farm position",
    7,
    -7,
    function(s) -- 500 (MaxValue) | 0 (MinValue)
        position1 = s
    end
)
local Tab = Window:NewTab("Event Npc farm")
local Section = Tab:NewSection("Event Npc autotp")
Section:NewToggle(
    "Auto Event Npc teleporter",
    "Automatically teleports you to an npc if it spawned.",
    function(state)
        if state then
            getgenv().findnpc = true
        else
            getgenv().findnpc = false
        end
        findnpc()
        OldManYochiro()
    end
)
Section:NewDropdown(
    "Choose Event Npc to look for",
    "Choose an Npc",
    {"Muzan", "Merchant", "OldMan","Injured"},
    function(currentOption)
        npclookingfor = currentOption
    end
)

local Section = Tab:NewSection("Event Npc Farms(use god mode)")
Section:NewToggle(
    "Auto Event mob farmer",
    "Automatically farms npc .",
    function(state)
        if state then
            getgenv().eventnpcfarm = true
        else
            getgenv().eventnpcfarm = false
        end
        
        OldManYochiro1()
        eventnpcfarm()
        killauraforevent()
    end
)

Section:NewDropdown(
    "Choose Event Mob ",
    "Chooses Mob for the autofarm to farm",
    {"Spider"},
    function(currentOption)
        eventlookingfor = currentOption
    end
)



Section:NewSlider(
    "Farm position",
    "Farm position",
    7,
    -7,
    function(s) -- 500 (MaxValue) | 0 (MinValue)
        positionevent = s
    end
)


local Tab = Window:NewTab("Player")
local Section = Tab:NewSection("Chat spammer")
Section:NewToggle(
    "Chat spammer toggle",
    "Toggles chat spammer on",
    function(state)
        if state then
            getgenv().chatspammer = true
        else
            getgenv().chatspammer = false
        end
        chatspammer()
    end
)
Section:NewTextBox(
    "Message:",
    "What message you want to spam",
    function(txt)
        sentence = txt
    end
)
local Section = Tab:NewSection("Player")
Section:NewToggle(
    "Noclip toggle",
    "Toggles Noclip on",
    function(state)
        if state then
            getgenv().noclip = true
        else
            getgenv().noclip = false
        end
        noclip()
    end
)

Section:NewToggle(
    "Walkspeed toggle",
    "Toggles Walkspeed on",
    function(state)
        if state then
            getgenv().walkspeed = true
        else
            getgenv().walkspeed = false
        end
        walkspeed()
    end
)

Section:NewSlider(
    "Walkspeed",
    "Walkspeed",
    500,
    1,
    function(s) -- 500 (MaxValue) | 0 (MinValue)
        amount = s
    end
)
Section:NewToggle(
    "JumpPower toggle",
    "Toggles JumpPower on",
    function(state)
        if state then
            getgenv().jumpower = true
        else
            getgenv().jumpower = false
        end
        jumpower()
    end
)

Section:NewSlider(
    "JumpPower",
    "JumpPower",
    500,
    1,
    function(s) -- 500 (MaxValue) | 0 (MinValue)
        amount1 = s
    end
)

local Tab = Window:NewTab("Misc")


local Section_MISC = Tab:NewSection("Instant max  lvl for slayers")

Section_MISC:NewButton(
    "Get crow quest(click first)",
    "Gets you the required crow quest for instant lvl",
    getquest
)

Section_MISC:NewToggle(
        "Instant max lvl for slayers",
        "Toggles instamax lvl",
        function(state)
            if state then
                getgenv().instantmaxlvlslayer = true
            else
                getgenv().instantmaxlvlslayer = false
            end
            instantlvl()
        end
    )


local Section_MISC = Tab:NewSection("Misc")

Section_MISC:NewButton(
    "Instant unlock lute(must have lute quest active)",
    "Completes the lute quest for you instantly",
    instalute
)

Section_MISC:NewToggle(
        "Autoequip weapon",
        "Toggles Autoequip",
        function(state)
            if state then
                getgenv().autoequip = true
            else
                getgenv().autoequip = false
            end
            autoequip()
        end
    )
    Section_MISC:NewDropdown(
        "Choose weapon to equip",
        "Weapon to choose",
        {"Nichirin", "Old Nichirin" },
        function(currentOption)
            tool = currentOption
        end
    )

Section_MISC:NewToggle(
    "Killaura toggle",
    "Toggles killaura on",
    function(state)
        if state then
            getgenv().killaura = true
        else
            getgenv().killaura = false
        end
        killaura()
    end
)

Section_MISC:NewToggle(
    "Godmode toggle",
    "Toggles godmode on",
    function(state)
        if state then
            getgenv().godmode = true
        else
            getgenv().godmode = false
        end
        godmode()
    end
)

Section_MISC:NewToggle(
    "Auto-breathing toggle",
    "Toggles autobreathing on",
    function(state)
        if state then
            getgenv().autobreathing = true
        else
            getgenv().autobreathing = false
        end
        autobreathing()
    end
)

local Tab = Window:NewTab("Teleports")
local Section_BAD = Tab:NewSection("Become A demon")
local Section_STW = Tab:NewSection("See through world")
local Section_Q = Tab:NewSection("Quests")
local Section_BT = Tab:NewSection("Breathing Trainers")

Section_BAD:NewButton(
    "Demon Turner tp",
    "Tps to Demon Turner",
    muzan
)

Section_STW:NewButton(
    "STW trainer tp",
    "Tps to STW trainer",
    stwtrainer
)
Section_STW:NewButton(
    "First idol(for upgraded STW)",
    "Tps to third idol",
    idol1
)
Section_STW:NewButton(
    "Second idol(for upgraded STW)",
    "Tps to third idol",
    idol2
)
Section_STW:NewButton(
    "Third idol(for upgraded STW)",
    "Tps to third idol",
    idol3
)


Section_Q:NewButton(
    "Lute quest tp",
    "Tps to Lute quest giver",
    lutetp
)


Section_BT:NewButton(
    "Wind Trainer",
    "Tps to Wind trainer",
    windtrainer
)

Section_BT:NewButton(
    "Moon Trainer",
    "Tps to Moon trainer",
    moontrainer
)
Section_BT:NewButton(
    "Flame Trainer",
    "Tps to Flame trainer",
    flametrainer
)
Section_BT:NewButton(
    "Mist Trainer",
    "Tps to Mist trainer",
    misttrainer
)
Section_BT:NewButton(
    "Thunder Trainer",
    "Tps to Thunder trainer",
    thundertrainer
)
Section_BT:NewButton(
    "Water Trainer",
    "Tps to Water trainer",
    watertrainer
)
Section_BT:NewButton(
    "Sound Trainer",
    "Tps to Sound trainer",
    soundtrainer
)
local Tab = Window:NewTab("Server hops etc")
local Section_SH = Tab:NewSection("Server hop")

Section_SH:NewButton(
    "Server hop",
    "Hops into another server",
    serverhop
)

local Tab = Window:NewTab("Ui settings")
local Section_UI = Tab:NewSection("Ui settings")

Section_UI:NewKeybind(
    "Ui toggle",
    "Toggles Ui",
    Enum.KeyCode.X,
    function()
        Library:ToggleUI()
    end
)
